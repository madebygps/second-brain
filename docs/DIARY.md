# Diary Guide

Complete guide to the `brain diary` commands for reflective journaling.

## Overview

The diary system provides AI-powered reflection with semantic backlinks. Entries are stored as markdown files in `DIARY_PATH` (typically your Obsidian vault).

**Key Features:**
- AI-generated prompts based on your past 3 days
- Semantic backlinks (LLM-powered, not keyword matching)
- Psychological/emotional tags
- Temporal connections
- Memory trace reports
- Pattern analysis

## Commands

### Creating Entries

```bash
brain diary create today      # Create today's reflection entry
brain diary create yesterday  # Create yesterday's entry (if you forgot)
```

### Managing Links

```bash
brain diary link today        # Generate backlinks for today
brain diary link yesterday    # Generate backlinks for yesterday
brain diary refresh 30        # Regenerate links for past 30 days
```

### Analysis

```bash
brain diary report 7          # Memory trace for past 7 days
brain diary report 30         # Memory trace for past 30 days
brain diary patterns 7        # Emotional patterns for past week
brain diary patterns 30       # Emotional patterns for past month
```

### Listing

```bash
brain diary list              # List all entries
brain diary list 7            # List past 7 days
```

## Entry Format

**Filename:** `YYYY-MM-DD.md` (e.g., `2025-10-15.md`)
**Location:** `DIARY_PATH` (Obsidian vault or markdown directory)

### Structure

```markdown
## Reflection Prompts
**1. First prompt based on past context**

**2. Second prompt based on past context**

**3. Third prompt based on past context**

---

## Brain Dump
[Your reflections go here - free-form writing]

---

## Memory Links
[Generated by: brain diary link today]

**Temporal:** [[YYYY-MM-DD]] • [[YYYY-MM-DD]]
**Topics:** #tag1 #tag2 #tag3

**Connections:**
- [[YYYY-MM-DD]] - Reason for semantic connection (confidence)
```

## Sections Explained

### 1. Reflection Prompts

AI-generated questions based on past 3 calendar days:
- Specific to your recent entries
- Helps you connect current thoughts to past context
- Changes daily based on what you wrote

**Sunday Special:**
- Gets 5 weekly prompts instead of 3 daily prompts
- Encourages bigger-picture reflection

**Example prompts:**
```markdown
**1. You mentioned feeling stuck on the redesign on [[2025-10-14]]. How did that evolve today?**

**2. Following up on your conversation with Sarah [[2025-10-13]], did anything come of that?**

**3. You were excited about starting the new project [[2025-10-12]]. How's your energy around it now?**
```

**Calendar-based context:**
- Uses past 3 calendar days, not "last 3 entries"
- If you skip Oct 13, prompts still reference Oct 14, 13, 12
- Weekend gaps are natural and expected

### 2. Brain Dump

Your free-form writing space:
- No structure required
- Write as much or as little as you want
- Process emotions, thoughts, events
- No need for complete sentences or organization

**This is the heart of your reflection.**

**What to write:**
- How did today feel?
- What's on your mind?
- What patterns are you noticing?
- Process difficult emotions
- Celebrate wins
- Work through confusion

**Not designed for:**
- Timestamped logs ("8am: breakfast")
- Detailed task lists (use planning)
- Meeting notes (use Obsidian daily notes)
- Life logging

### 3. Memory Links

Generated automatically by `brain diary link today`:
- **Not created during** `brain diary create` (keep writing distraction-free)
- **Added afterward** via `brain diary link today`

#### Temporal Links

Direct connections to previous entries (usually past 3 days):
```markdown
**Temporal:** [[2025-10-14]] • [[2025-10-13]] • [[2025-10-12]]
```

#### Topic Tags

Psychological/emotional themes (not surface topics):
```markdown
**Topics:** #self-doubt #growth #productivity #perfectionism
```

**What you'll see:**
- ✅ `#perfectionism` `#self-doubt` `#growth` `#anxiety`
- ❌ `#work` `#gym` `#coffee` `#meetings`

The system identifies emotional and psychological patterns, not activities.

#### Semantic Connections

LLM-identified thematic links to older entries:
```markdown
**Connections:**
- [[2025-09-20]] - Both discuss feelings about new project direction (high)
- [[2025-10-01]] - Similar themes of work-life balance concerns (medium)
```

**Confidence levels:**
- `high` - Strong thematic overlap, clear relationship
- `medium` - Moderate connection worth exploring
- `low` - Weak signal, might be coincidental

## Daily Workflow

### Evening Routine (10-15 minutes)

```bash
# 1. Create entry
brain diary create today

# 2. Write your reflection
# - Read the prompts (but don't feel obligated to answer them)
# - Write freely in the Brain Dump section
# - Process your day without judgment

# 3. Generate semantic links
brain diary link today
```

**Tips:**
- Don't overthink the prompts - they're conversation starters
- Write for yourself, not an audience
- Incomplete sentences are fine
- Stream of consciousness is encouraged
- 5 minutes of writing beats 30 minutes of "perfect" writing

### Weekly Review (Optional)

**Sunday evening:**
```bash
brain diary report 7      # Memory trace for past week
brain diary patterns 7    # Emotional patterns
```

Review the analysis:
- What patterns emerged?
- What surprised you?
- What needs attention next week?

## Linking Philosophy

### When Links Are Generated

Links are created **after writing**, not during:

**Why?**
- Keep writing distraction-free
- Avoid interrupting flow state
- Let ideas flow without structure constraints
- Process first, organize later

### What Triggers Linking

Run `brain diary link today` when:
- ✅ Brain Dump section has content (>1 character)
- ✅ You've finished writing and want to see connections
- ✅ You're done editing for the day

Skip linking if:
- ❌ Entry is still a draft
- ❌ Brain Dump is empty
- ❌ You plan to add more content later

### How Semantic Linking Works

1. **Entity extraction:** People, places, projects, themes
2. **Content analysis:** Emotional context, psychological patterns
3. **Connection scoring:** Compare to all past entries
4. **Confidence assignment:** High/medium/low based on overlap
5. **Tag generation:** Extract 10-15 psychological themes

**Not keyword matching:**
- ❌ "redesign" → finds all entries with "redesign"
- ✅ "feeling stuck on the redesign" → finds entries about creative blocks, even if they don't say "redesign"

### Bulk Operations

**Refresh links for recent entries:**
```bash
brain diary refresh 30  # Regenerate links for past 30 days
```

**Use cases:**
- After adjusting LLM configuration
- When connection quality improves with better prompts
- Fixing old entries with poor links
- Initial setup with existing entries

**Warning:** This overwrites existing Memory Links sections.

## Analysis Commands

### Memory Trace Report

```bash
brain diary report 7     # Past week
brain diary report 30    # Past month
```

**Generates:**
- Narrative summary of key activities and events
- Emotional patterns across timespan
- Semantic connections between entries
- Entity frequency (people, places, projects)

**Purpose:** See the forest, not just trees. Understand your month at a glance.

**Example output:**
```
Memory Trace Report (Past 7 Days)

Over the past week, you've been focused on the API refactor project,
with recurring mentions of code reviews and deployment concerns. A
pattern of pre-deployment anxiety emerged, particularly on Oct 14 and
Oct 15, both discussing perfectionism and trust in testing.

Key People: Sarah (Q4 planning, feedback), Alex (database decisions)
Key Projects: API refactor, database migration
Emotional Themes: Productivity, anxiety, perfectionism, balance

Strong Connection: Oct 15 and Sep 28 both explore pre-deployment
anxiety and perfectionism patterns.
```

### Pattern Analysis

```bash
brain diary patterns 7   # Past week
brain diary patterns 30  # Past month
```

**Generates:**
- Ranked list of emotional/psychological themes
- Pure psychological tags (no surface topics)
- Helps spot recurring mental patterns

**Example output:**
```
Emotional & Psychological Patterns (past 7 days)

1. #self-doubt
2. #perfectionism
3. #growth
4. #productivity
5. #anxiety
6. #balance
7. #self-worth
```

**Purpose:** Understand what's *really* on your mind, not just what you did.

## Customization

### Custom Entry Structure

Feel free to customize the Brain Dump section:

```markdown
## Brain Dump

### Work
Today's project updates and reflections...

### Personal
Thoughts on relationships and personal growth...

### Learning
Insights from reading and studying...
```

The linking system only cares about content, not structure.

### Skipping Days

Don't worry about gaps:
- System uses calendar days, not consecutive entries
- Prompts will still reference recent entries
- No penalty for skipping days
- Journaling is about consistency, not perfection

### Minimal Entries

Short entries are perfectly fine:

```markdown
## Brain Dump
Tired today. Not much to say. That's okay.
```

The system won't generate links if there's minimal content, which is fine.

### Rich Media

While the system analyzes text, you can add:
- Images: `![[image.png]]`
- External links: `[article](https://...)`
- Code blocks for technical reflections
- Tables, lists, whatever helps your thinking

The LLM focuses on text content for analysis.

## Obsidian Integration

### Graph View

Backlinks create visual connection graph:
- See patterns over time
- Discover unexpected connections
- Understand your thinking evolution

### Mobile Sync

Use Obsidian mobile to:
- Write reflections on phone/tablet
- Review past entries anywhere
- Run `brain diary link` later on desktop

### Daily Notes vs. Diary

**Keep them separate:**

- **Second Brain Diary** (`DIARY_PATH`): Evening reflection, emotional processing
- **Obsidian Daily Notes**: Meeting notes, logs, quick captures, task lists

Both can coexist in the same vault, just use different directories or naming schemes.

### Search and Navigation

Obsidian's powerful search works on diary entries:
- Search by tag: `tag:#perfectionism`
- Search by date range
- Search by people or project names
- Follow backlinks to related entries

## Backup Strategy

Since everything is markdown files:

```bash
# Simple backup
cp -r $DIARY_PATH ~/backups/diary-$(date +%Y%m%d)

# Or use git
cd $DIARY_PATH
git init
git add .
git commit -m "Journal backup"
```

**Consider:**
- Time Machine (macOS)
- Obsidian Sync (encrypted cloud backup)
- Git repository (if comfortable with git)
- iCloud Drive / Dropbox (if paths are in cloud folder)

**Your journal is valuable. Back it up.**

## LLM Provider Notes

### With Ollama (Local)

- All analysis happens on your machine
- Slightly slower than Azure (3-5 seconds per operation)
- **Completely private** - diary content never leaves your computer
- No cost tracking (local is free!)
- Identical functionality to Azure

### With Azure OpenAI

- Analysis uses cloud API
- Faster (1-2 seconds per operation)
- Costs ~$0.01-0.05 per day depending on usage
- Usage tracked in cost database
- Same privacy as any cloud service

Both providers produce identical results.

## Tips & Best Practices

### Write for Yourself

This is your private space:
- Be honest about emotions
- Don't self-censor
- Process difficult feelings
- Celebrate without humility

### Use Prompts as Springboards

The AI prompts are conversation starters:
- Answer them if they resonate
- Ignore them if they don't
- Use them to jog your memory
- They're suggestions, not assignments

### Focus on Feelings, Not Facts

Good diary entries explore:
- ✅ "I felt anxious about the deployment"
- ✅ "Still wrestling with perfectionism"
- ✅ "Surprised by how energized I felt"

Not just:
- ❌ "Had 3 meetings"
- ❌ "Finished the report"
- ❌ "Went to the gym"

### Trust the Semantic Links

The LLM finds connections you might miss:
- Don't dismiss unexpected links
- Explore why the system connected two entries
- Sometimes the "medium" confidence links are most interesting

### Review Patterns Monthly

Run `brain diary patterns 30` monthly:
- What themes keep appearing?
- What's changed from last month?
- What needs attention?

### Don't Overthink It

Best journaling habit:
- ⏱️ 10-15 minutes daily
- 📝 Free-form writing
- 🔗 Quick link generation
- ✅ Consistency over perfection

---

*The diary is your thinking space. Make it yours.*
